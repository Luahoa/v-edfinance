# ========================================
# V-EDFINANCE DEPLOYMENT SECRETS TEMPLATE
# ========================================
# Generated: 2026-01-04
# Stack: Next.js 15 + NestJS + PostgreSQL + Redis
# Deployment: Cloudflare Pages (Frontend) + Dokploy VPS (Backend)

# ========================================
# üî¥ CRITICAL - SECURITY (MANDATORY)
# ========================================
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"

# JWT Secrets (MUST be different for each environment)
JWT_SECRET=CHANGE_THIS_64_CHAR_HEX_DEV
JWT_SECRET_DEV=CHANGE_THIS_64_CHAR_HEX_DEV
JWT_SECRET_STAGING=CHANGE_THIS_64_CHAR_HEX_STAGING
JWT_SECRET_PROD=CHANGE_THIS_64_CHAR_HEX_PROD

# JWT Refresh Token Secrets (MUST differ from JWT_SECRET)
JWT_REFRESH_SECRET=CHANGE_THIS_64_CHAR_HEX_REFRESH_DEV
JWT_REFRESH_SECRET_PROD=CHANGE_THIS_64_CHAR_HEX_REFRESH_PROD

# Encryption Key for sensitive data (32 bytes hex)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY_PROD=CHANGE_THIS_32_CHAR_HEX

# JWT Token Expiration
JWT_EXPIRES_IN=15m

# ========================================
# üóÑÔ∏è DATABASE CONFIGURATION
# ========================================

# PostgreSQL (Development - Local)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/vedfinance?schema=public&connection_limit=5

# PostgreSQL (Staging - Dokploy VPS)
# DATABASE_URL=postgresql://postgres:${POSTGRES_PASSWORD}@103.54.153.248:5432/vedfinance_staging?schema=public

# PostgreSQL (Production - Dokploy VPS)
# DATABASE_URL=postgresql://postgres:${POSTGRES_PASSWORD}@103.54.153.248:5432/vedfinance_prod?schema=public

# Postgres Admin Password (Dokploy VPS)
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_PASSWORD

# Test Database (Optional - for E2E tests)
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/vedfinance_test?schema=public

# ========================================
# üì¶ REDIS CONFIGURATION (Session/Cache)
# ========================================

# Redis (Development - Local)
REDIS_URL=redis://localhost:6379

# Redis (Staging/Production - Dokploy VPS)
# REDIS_URL=redis://103.54.153.248:6379/0

# Redis Password (if enabled in production)
# REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD

# ========================================
# ‚òÅÔ∏è CLOUDFLARE R2 STORAGE (File Uploads)
# ========================================

# Storage Driver: 'fs' (local dev), 'r2' (production)
STORAGE_DRIVER=r2

# Local Filesystem (Development Only)
STORAGE_FS_BASE=./uploads

# R2 Account ID (from Cloudflare dashboard URL)
# Example: https://dash.cloudflare.com/{ACCOUNT_ID}/r2
R2_ACCOUNT_ID=your-cloudflare-account-id

# R2 Bucket Name
R2_BUCKET_NAME=vedfinance-prod

# R2 API Credentials
# Get from: Cloudflare Dashboard ‚Üí R2 ‚Üí Manage R2 API Tokens
R2_ACCESS_KEY_ID=your-r2-access-key-id
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key

# R2 Public URL
# Format: https://pub-{random}.r2.dev/{bucket-name}
# Or custom domain: https://cdn.v-edfinance.com
R2_PUBLIC_URL=https://pub-xxx.r2.dev/vedfinance-prod

# R2 S3-Compatible Endpoint
R2_ENDPOINT=https://{R2_ACCOUNT_ID}.r2.cloudflarestorage.com

# ========================================
# ü§ñ AI / API INTEGRATIONS
# ========================================

# Google Gemini API (AI Features)
# Get from: https://makersuite.google.com/app/apikey
# Free tier: 60 requests/minute, 1500 requests/day
GEMINI_API_KEY=AIzaSy...your-gemini-api-key

# YouTube Data API v3 (Video Metadata)
# Get from: https://console.cloud.google.com/apis/credentials
# Enable API: https://console.cloud.google.com/apis/library/youtube.googleapis.com
# Quota: 10,000 units/day (1 video metadata = 1 unit)
YOUTUBE_API_KEY=AIzaSy...your-youtube-api-key

# E2B Code Interpreter (AI Code Execution)
# Get from: https://e2b.dev/dashboard
E2B_API_KEY=e2b_...your-e2b-api-key

# ========================================
# üåê CORS & DOMAIN CONFIGURATION
# ========================================

# CORS Origins (comma-separated)
CORS_ORIGIN=http://localhost:3002,https://v-edfinance.com,https://www.v-edfinance.com

# Frontend URLs (for redirects, emails)
NEXT_PUBLIC_API_URL=https://api.v-edfinance.com
NEXT_PUBLIC_FRONTEND_URL=https://v-edfinance.com

# ========================================
# üìß EMAIL SERVICE (Optional - Future)
# ========================================

# SMTP Configuration (for transactional emails)
# MAIL_HOST=smtp.gmail.com
# MAIL_PORT=587
# MAIL_USER=noreply@v-edfinance.com
# MAIL_PASSWORD=your-gmail-app-password
# MAIL_FROM=noreply@v-edfinance.com

# Sendgrid Alternative
# SENDGRID_API_KEY=SG.xxx
# SENDGRID_FROM_EMAIL=noreply@v-edfinance.com

# ========================================
# üí≥ PAYMENT GATEWAY (Optional - Future)
# ========================================

# Stripe (for premium features)
# STRIPE_SECRET_KEY=sk_test_xxx (test) or sk_live_xxx (production)
# STRIPE_PUBLISHABLE_KEY=pk_test_xxx (test) or pk_live_xxx (production)
# STRIPE_WEBHOOK_SECRET=whsec_xxx

# ========================================
# üîê OAUTH PROVIDERS (Optional - Future)
# ========================================

# Google OAuth 2.0
# GOOGLE_CLIENT_ID=xxx.apps.googleusercontent.com
# GOOGLE_CLIENT_SECRET=GOCSPX-xxx

# GitHub OAuth
# GITHUB_CLIENT_ID=Iv1.xxx
# GITHUB_CLIENT_SECRET=xxx

# ========================================
# üìä MONITORING & OBSERVABILITY
# ========================================

# Sentry (Error Tracking - Optional)
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
# SENTRY_ENVIRONMENT=production

# Google Analytics (Optional)
# NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX

# ========================================
# üß™ TESTING & DEVELOPMENT
# ========================================

# Node Environment
NODE_ENV=development  # development | staging | production

# Debug Flags
DEBUG=false
LOG_LEVEL=info  # debug | info | warn | error

# Next.js Telemetry
NEXT_TELEMETRY_DISABLED=1

# ========================================
# üöÄ DEPLOYMENT METADATA
# ========================================

# Dokploy VPS Access
# VPS_IP=103.54.153.248
# VPS_SSH_KEY_PATH=~/.ssh/dokploy_ed25519

# Dokploy Dashboard URL
# DOKPLOY_URL=http://103.54.153.248:3000

# ========================================
# üìù VALIDATION CHECKLIST
# ========================================
# Before deploying, ensure:
# ‚úÖ All JWT_SECRET* are different 64-char hex strings
# ‚úÖ POSTGRES_PASSWORD is strong (16+ chars, mixed case, special chars)
# ‚úÖ R2_ACCOUNT_ID, R2_ACCESS_KEY_ID, R2_SECRET_ACCESS_KEY are set
# ‚úÖ GEMINI_API_KEY is valid (test with: curl -H "x-goog-api-key: $KEY" https://generativelanguage.googleapis.com/v1/models)
# ‚úÖ YOUTUBE_API_KEY quota is checked (Google Cloud Console)
# ‚úÖ DATABASE_URL uses correct environment (staging/prod)
# ‚úÖ CORS_ORIGIN includes all valid domains
# ‚úÖ No secrets committed to git (.env should be in .gitignore)

# ========================================
# üîí SECURITY NOTES
# ========================================
# 1. Never commit this file with real secrets to git
# 2. Use different secrets for dev/staging/prod environments
# 3. Rotate JWT secrets every 90 days in production
# 4. Store production secrets in Dokploy dashboard (encrypted)
# 5. Use `.env.local` for local development overrides
# 6. Audit API key usage monthly (Cloudflare, Google Cloud)
# 7. Enable IP whitelisting for R2 API in production
